/*! iNGB JavaScript Framework v1.1.0pre Copyright Â© 2013 WhiteSnow 2013-08-03 */
!function(a){var b="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",c={ID:new RegExp("^#("+b+")"),CLASS:new RegExp("^\\.("+b+")"),TAG:new RegExp("^("+b.replace("w","w*")+")")},d=function(a,b){return c.ID.test(b)?a.getElementById(b.replace("#","")):c.CLASS.test(b)?a.getElementsByClassName(slector.replace(".","")):c.TAG.test(b)?a.getElementsByTagName(b):void 0};d.log=d._log=function(){},a.$=d}(this),function(a){function b(b,c,d,e){try{Object.defineProperty(b,c,{get:d,set:e,enumerable:!0,configurable:!0})}catch(f){try{Object.prototype.__defineGetter__.call(b,c,d),Object.prototype.__defineSetter__.call(b,c,e)}catch(g){a._log("browser not supported.")}}}function c(a,c,d){var e=a[c],f=function(){return e},g=function(a){e=a,d(c)};b(a,c,f,g)}a.watcher=c}($),function(a){var b=document,c={},d=[],e=function(c){this.name=c,d.length?this.iframe=d.shift():(this.iframe=b.createElement("iframe"),b.body.appendChild(this.iframe),this.iframe.style.position="absolute",this.iframe.scrolling="no",this.iframe.frameBorder="no",this.iframe.zIndex="999"),a._log("Widget["+c+"] has been created!")};a.widgetCache=c,a.widget=function(b){return b?c[b]||(c[b]=new e(b)):a.mainFrame},a.widget.prototype=e.prototype={constructor:a.widget,load:function(b){function c(){d.doc=d.iframe.contentDocument,d.win=d.iframe.contentWindow,d.win.__={handler:d.win.eventHandler||function(){},name:d.name},a._log("Widget["+d.name+"] url == "+b),a.init(d.win,d.doc),d.iframe.onload=function(){};var c;(c=d.win.onReady)&&c()}this.win&&a.removeHandler(this.win.__.handler);var d=this;this.iframe.onload=c,this.iframe.src=b},resize:function(a,b){this.iframe.width=a+"",this.iframe.height=b+""},moveTo:function(a,b){this.iframe.style.left=a+"",this.iframe.style.top=b+""},minimize:function(){a.removeHandler(this.win.__.handler),this.iframe.style.display="none"},show:function(){a.addHandler(this.win.__.handler),this.iframe.style.display="block"},level:function(a){this.iframe.style.zIndex=a+""},close:function(){a.removeHandler(this.win.__.handler),a._log("Widget["+this.name+"] has been close!"),delete c[this.name],d.push(this.iframe)}},a.mainFrame=new e("mainFrame"),a.mainFrame.resize(1280,720),a.mainFrame.moveTo(0,0),a.mainFrame.gotoApp=function(b){function c(){-1===this.src.indexOf("http://")&&d(),e.doc=e.iframe.contentDocument,e.win=e.iframe.contentWindow,a._log("Widget["+e.name+"] url == "+b)}function d(){e.doc=e.iframe.contentDocument,e.win=e.iframe.contentWindow,e.win.__={handler:e.win.eventHandler||function(){},name:e.name},a._log("Widget["+e.name+"] url == "+b),a.init(e.win,e.doc),e.iframe.onload=function(){};var c;(c=e.win.onReady)&&c()}this.win&&a.removeHandler(this.win.__.handler);var e=this;this.iframe.onload=c,this.iframe.src=b},a.mainFrame.gotoApp2=function(b){function c(){function c(b){var c=e.doc[b];e.doc[b]=function(d){var e;return(e="onkeydown"===b?a.KeyEvent[d.which]:a.SystemEvent[d.which])&&!eventManager(e,"onkeydown"===b?1:2,d.modifiers)?0:(c(d),void 0)}}return-1===this.src.indexOf("http://")?(d(),void 0):(e.doc=e.iframe.contentDocument,e.win=e.iframe.contentWindow,a._log("Widget["+e.name+"] url == "+b),a.watcher(e.doc,"onkeydown",c),a.watcher(e.doc,"onsystemevent",c),void 0)}function d(){e.doc=e.iframe.contentDocument,e.win=e.iframe.contentWindow,e.win.__={handler:e.win.eventHandler||function(){},name:e.name},a._log("Widget["+e.name+"] url == "+b),a.init(e.win,e.doc),e.iframe.onload=function(){};var c;(c=e.win.onReady)&&c()}this.win&&a.removeHandler(this.win.__.handler);var e=this;this.iframe.onload=c,this.iframe.src=b}}($),function(a){var b=document,c=(window.LIB_PATH||"dist").replace("//$/",""),d={EVENT:c+"/event.min.js",DATE:c+"/date.min.js",AJAX:c+"/ajax.min.js",MSG:c+"/msg.min.js",STRING:c+"/string.min.js",LOG:c+"/log.min.js",AMD:c+"/amd.min.js",HANDLER:c+"/handler.min.js",STACKTRACE:c+"/stacktrace.min.js"};a.require=function(c,e){if(c=c.toUpperCase(),a[c])e&&e(a,a[c.toLowerCase()]);else{var f=b.createElement("script");e&&(f.onload=function(){e(a,a[c.toLowerCase()]),f.onload=function(){}}),f.type="text/javascript",f.src=d[c],b.body.appendChild(f),a._log("Module("+c+") has been loaded.")}}}($),function(a){function b(b,f,g){if(b.p2=g,d=e.length)for(c=0;d>c;c++)if(!e[c](b,f))return a._log("The event("+b.code+") stop down flow in widget."),0;return a.mainFrame.win.__&&!a.mainFrame.win.__.handler(b,f)?(a._log("The event("+b.code+") stop down flow in mainFrame."),0):(window.eventHandler&&eventHandler(b,f),void 0)}var c,d,e=[];a.KeyEvent={8:{code:"KEY_BACK"},13:{code:"KEY_SELECT"},27:{code:"KEY_EXIT",type:1},33:{code:"KEY_PAGE_UP"},34:{code:"KEY_PAGE_DOWN"},37:{code:"KEY_LEFT"},38:{code:"KEY_UP"},39:{code:"KEY_RIGHT"},40:{code:"KEY_DOWN"},4097:{code:"KEY_MENU"}},a.SystemEvent={8280:{code:"DVB_STARTUP_FINISH"}},document.onkeydown=function(c){var d;if((d=a.KeyEvent[c.which])&&!b(d,1,c.modifiers))return 0;if(!a.mainFrame.__){var e=a.mainFrame.doc.onkeydown;"function"==typeof e&&e(c)}},document.onsystemevent=function(c){var d;if((d=a.SystemEvent[c.which])&&!b(d,2,c.modifiers))return 0;if(!a.mainFrame.__){var e=a.mainFrame.doc.onsystemevent;"function"==typeof e&&e(c)}},a.addHandler=function(a){e.push(a)},a.removeHandler=function(a){(c=e.indexOf(a))>-1&&e.splice(c,1)},a.sendEvent=function(a,c,d){1===d?b(KeyEvent[a],d,c):2===d&&b(SystemEvent[a],d,c)},a.init=function(b,c){b.$=a,"mainFrame"!==b.__.name&&b.__.handler&&a.addHandler(b.__.handler),b.changeHandler=function(c){a.removeHandler(b.__.handler),a.addHandler(c),this.__.handler=c},b.Q=function(b,d){return a(d||c,b)},b.require=function(){a.amd.require?a.amd.require.apply(this,arguments):a._log("Module(AMD) must be loaded!")},b.define=function(){a.amd.define?a.amd.define.apply(this,arguments):a._log("Module(AMD) must be loaded!")}}}($);